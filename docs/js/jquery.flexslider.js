(function(a){a.flexslider=function(y,m){var w=a(y),j=a.extend({},a.flexslider.defaults,m),x=j.namespace,q="ontouchstart" in window||window.DocumentTouch&&document instanceof DocumentTouch,z=q?"touchend":"click",b=j.direction==="vertical",e=j.reverse,k=j.itemWidth>0,d=j.animation==="fade",g=j.asNavFor!=="",v={};a.data(y,"flexslider",w);v={init:function(){w.animating=false;w.currentSlide=j.startAt;w.animatingTo=w.currentSlide;w.atEnd=w.currentSlide===0||w.currentSlide===w.last;w.containerSelector=j.selector.substr(0,j.selector.search(" "));w.slides=a(j.selector,w);w.container=a(w.containerSelector,w);w.count=w.slides.length;w.syncExists=a(j.sync).length>0;if(j.animation==="slide"){j.animation="swing"}w.prop=b?"top":"marginLeft";w.args={};w.manualPause=false;w.transitions=!j.video&&!d&&j.useCSS&&function(){var c=document.createElement("div"),h=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var f in h){if(c.style[h[f]]!==undefined){w.pfx=h[f].replace("Perspective","").toLowerCase();w.prop="-"+w.pfx+"-transform";return true}}return false}();if(j.controlsContainer!==""){w.controlsContainer=a(j.controlsContainer).length>0&&a(j.controlsContainer)}if(j.manualControls!==""){w.manualControls=a(j.manualControls).length>0&&a(j.manualControls)}if(j.randomize){w.slides.sort(function(){return Math.round(Math.random())-0.5});w.container.empty().append(w.slides)}w.doMath();if(g){v.asNav.setup()}w.setup("init");if(j.controlNav){v.controlNav.setup()}if(j.directionNav){v.directionNav.setup()}if(j.keyboard&&(a(w.containerSelector).length===1||j.multipleKeyboard)){a(document).bind("keyup",function(c){var h=c.keyCode;if(!w.animating&&(h===39||h===37)){var f=h===39?w.getTarget("next"):h===37?w.getTarget("prev"):false;w.flexAnimate(f,j.pauseOnAction)}})}if(j.mousewheel){w.bind("mousewheel",function(c,l,f,i){c.preventDefault();var h=l<0?w.getTarget("next"):w.getTarget("prev");w.flexAnimate(h,j.pauseOnAction)})}if(j.pausePlay){v.pausePlay.setup()}if(j.slideshow){if(j.pauseOnHover){w.hover(function(){if(!w.manualPlay&&!w.manualPause){w.pause()}},function(){if(!w.manualPause&&!w.manualPlay){w.play()}})}j.initDelay>0?setTimeout(w.play,j.initDelay):w.play()}if(q&&j.touch){v.touch()}if(!d||d&&j.smoothHeight){a(window).bind("resize focus",v.resize)}setTimeout(function(){j.start(w)},200)},asNav:{setup:function(){w.asNav=true;w.animatingTo=Math.floor(w.currentSlide/w.move);w.currentItem=w.currentSlide;w.slides.removeClass(x+"active-slide").eq(w.currentItem).addClass(x+"active-slide");w.slides.click(function(h){h.preventDefault();var c=a(this),f=c.index();if(!a(j.asNavFor).data("flexslider").animating&&!c.hasClass("active")){w.direction=w.currentItem<f?"next":"prev";w.flexAnimate(f,j.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!w.manualControls){v.controlNav.setupPaging()}else{v.controlNav.setupManual()}},setupPaging:function(){var l=j.controlNav==="thumbnails"?"control-thumbs":"control-paging",i=1,c;w.controlNavScaffold=a('<ol class="'+x+"control-nav "+x+l+'"></ol>');if(w.pagingCount>1){for(var h=0;h<w.pagingCount;h++){c=j.controlNav==="thumbnails"?'<img src="'+w.slides.eq(h).attr("data-thumb")+'"/>':"<a>"+i+"</a>";w.controlNavScaffold.append("<li>"+c+"</li>");i++}}w.controlsContainer?a(w.controlsContainer).append(w.controlNavScaffold):w.append(w.controlNavScaffold);v.controlNav.set();v.controlNav.active();w.controlNavScaffold.delegate("a, img",z,function(r){r.preventDefault();var f=a(this),p=w.controlNav.index(f);if(!f.hasClass(x+"active")){w.direction=p>w.currentSlide?"next":"prev";w.flexAnimate(p,j.pauseOnAction)}});if(q){w.controlNavScaffold.delegate("a","click touchstart",function(f){f.preventDefault()})}},setupManual:function(){w.controlNav=w.manualControls;v.controlNav.active();w.controlNav.live(z,function(h){h.preventDefault();var c=a(this),f=w.controlNav.index(c);if(!c.hasClass(x+"active")){f>w.currentSlide?w.direction="next":w.direction="prev";w.flexAnimate(f,j.pauseOnAction)}});if(q){w.controlNav.live("click touchstart",function(c){c.preventDefault()})}},set:function(){var c=j.controlNav==="thumbnails"?"img":"a";w.controlNav=a("."+x+"control-nav li "+c,w.controlsContainer?w.controlsContainer:w)},active:function(){w.controlNav.removeClass(x+"active").eq(w.animatingTo).addClass(x+"active")},update:function(f,c){if(w.pagingCount>1&&f==="add"){w.controlNavScaffold.append(a("<li><a>"+w.count+"</a></li>"))}else{if(w.pagingCount===1){w.controlNavScaffold.find("li").remove()}else{w.controlNav.eq(c).closest("li").remove()}}v.controlNav.set();w.pagingCount>1&&w.pagingCount!==w.controlNav.length?w.update(c,f):v.controlNav.active()}},directionNav:{setup:function(){var c=a('<ul class="'+x+'direction-nav"><li><a class="'+x+'prev" href="#">'+j.prevText+'</a></li><li><a class="'+x+'next" href="#">'+j.nextText+"</a></li></ul>");if(w.controlsContainer){a(w.controlsContainer).append(c);w.directionNav=a("."+x+"direction-nav li a",w.controlsContainer)}else{w.append(c);w.directionNav=a("."+x+"direction-nav li a",w)}v.directionNav.update();w.directionNav.bind(z,function(h){h.preventDefault();var f=a(this).hasClass(x+"next")?w.getTarget("next"):w.getTarget("prev");w.flexAnimate(f,j.pauseOnAction)});if(q){w.directionNav.bind("click touchstart",function(f){f.preventDefault()})}},update:function(){var c=x+"disabled";if(w.pagingCount===1){w.directionNav.addClass(c)}else{if(!j.animationLoop){if(w.animatingTo===0){w.directionNav.removeClass(c).filter("."+x+"prev").addClass(c)}else{if(w.animatingTo===w.last){w.directionNav.removeClass(c).filter("."+x+"next").addClass(c)}else{w.directionNav.removeClass(c)}}}else{w.directionNav.removeClass(c)}}}},pausePlay:{setup:function(){var c=a('<div class="'+x+'pauseplay"><a></a></div>');if(w.controlsContainer){w.controlsContainer.append(c);w.pausePlay=a("."+x+"pauseplay a",w.controlsContainer)}else{w.append(c);w.pausePlay=a("."+x+"pauseplay a",w)}v.pausePlay.update(j.slideshow?x+"pause":x+"play");w.pausePlay.bind(z,function(f){f.preventDefault();if(a(this).hasClass(x+"pause")){w.manualPause=true;w.manualPlay=false;w.pause()}else{w.manualPause=false;w.manualPlay=true;w.play()}});if(q){w.pausePlay.bind("click touchstart",function(f){f.preventDefault()})}},update:function(c){c==="play"?w.pausePlay.removeClass(x+"pause").addClass(x+"play").text(j.playText):w.pausePlay.removeClass(x+"play").addClass(x+"pause").text(j.pauseText)}},touch:function(){function c(h){if(w.animating){h.preventDefault()}else{if(h.touches.length===1){w.pause();t=b?w.h:w.w;i=Number(new Date);B=k&&e&&w.animatingTo===w.last?0:k&&e?w.limit-(w.itemW+j.itemMargin)*w.move*w.animatingTo:k&&w.currentSlide===w.last?w.limit:k?(w.itemW+j.itemMargin)*w.move*w.currentSlide:e?(w.last-w.currentSlide+w.cloneOffset)*t:(w.currentSlide+w.cloneOffset)*t;f=b?h.touches[0].pageY:h.touches[0].pageX;r=b?h.touches[0].pageX:h.touches[0].pageY;y.addEventListener("touchmove",D,false);y.addEventListener("touchend",l,false)}}}function D(h){C=b?f-h.touches[0].pageY:f-h.touches[0].pageX;A=b?Math.abs(C)<Math.abs(h.touches[0].pageX-r):Math.abs(C)<Math.abs(h.touches[0].pageY-r);if(!A||Number(new Date)-i>500){h.preventDefault();if(!d&&w.transitions){if(!j.animationLoop){C=C/(w.currentSlide===0&&C<0||w.currentSlide===w.last&&C>0?Math.abs(C)/t+2:1)}w.setProps(B+C,"setTouch")}}}function l(h){y.removeEventListener("touchmove",D,false);if(w.animatingTo===w.currentSlide&&!A&&!(C===null)){var o=e?-C:C,n=o>0?w.getTarget("next"):w.getTarget("prev");if(w.canAdvance(n)&&(Number(new Date)-i<550&&Math.abs(o)>50||Math.abs(o)>t/2)){w.flexAnimate(n,j.pauseOnAction)}else{if(!d){w.flexAnimate(w.currentSlide,j.pauseOnAction,true)}}}y.removeEventListener("touchend",l,false);f=null;r=null;C=null;B=null}var f,r,B,t,C,i,A=false;y.addEventListener("touchstart",c,false)},resize:function(){if(!w.animating&&w.is(":visible")){if(!k){w.doMath()}if(d){v.smoothHeight()}else{if(k){w.slides.width(w.computedW);w.update(w.pagingCount);w.setProps()}else{if(b){w.viewport.height(w.h);w.setProps(w.h,"setTotal")}else{if(j.smoothHeight){v.smoothHeight()}w.newSlides.width(w.computedW);w.setProps(w.computedW,"setTotal")}}}}},smoothHeight:function(c){if(!b||d){var f=d?w:w.viewport;c?f.animate({height:w.slides.eq(w.animatingTo).height()},c):f.height(w.slides.eq(w.animatingTo).height())}},sync:function(h){var c=a(j.sync).data("flexslider"),f=w.animatingTo;switch(h){case"animate":c.flexAnimate(f,j.pauseOnAction,false,true);break;case"play":if(!c.playing&&!c.asNav){c.play()}break;case"pause":c.pause();break}}};w.flexAnimate=function(o,l,p,f,r){if(g&&w.pagingCount===1){w.direction=w.currentItem<o?"next":"prev"}if(!w.animating&&(w.canAdvance(o,r)||p)&&w.is(":visible")){if(g&&f){var i=a(j.asNavFor).data("flexslider");w.atEnd=o===0||o===w.count-1;i.flexAnimate(o,true,false,true,r);w.direction=w.currentItem<o?"next":"prev";i.direction=w.direction;if(Math.ceil((o+1)/w.visible)-1!==w.currentSlide&&o!==0){w.currentItem=o;w.slides.removeClass(x+"active-slide").eq(o).addClass(x+"active-slide");o=Math.floor(o/w.visible)}else{w.currentItem=o;w.slides.removeClass(x+"active-slide").eq(o).addClass(x+"active-slide");return false}}w.animating=true;w.animatingTo=o;j.before(w);if(l){w.pause()}if(w.syncExists&&!r){v.sync("animate")}if(j.controlNav){v.controlNav.active()}if(!k){w.slides.removeClass(x+"active-slide").eq(o).addClass(x+"active-slide")}w.atEnd=o===0||o===w.last;if(j.directionNav){v.directionNav.update()}if(o===w.last){j.end(w);if(!j.animationLoop){w.pause()}}if(!d){var h=b?w.slides.filter(":first").height():w.computedW,A,c,s;if(k){A=j.itemWidth>w.w?j.itemMargin*2:j.itemMargin;s=(w.itemW+A)*w.move*w.animatingTo;c=s>w.limit&&w.visible!==1?w.limit:s}else{if(w.currentSlide===0&&o===w.count-1&&j.animationLoop&&w.direction!=="next"){c=e?(w.count+w.cloneOffset)*h:0}else{if(w.currentSlide===w.last&&o===0&&j.animationLoop&&w.direction!=="prev"){c=e?0:(w.count+1)*h}else{c=e?(w.count-1-o+w.cloneOffset)*h:(o+w.cloneOffset)*h}}}w.setProps(c,"",j.animationSpeed);if(w.transitions){if(!j.animationLoop||!w.atEnd){w.animating=false;w.currentSlide=w.animatingTo}w.container.unbind("webkitTransitionEnd transitionend");w.container.bind("webkitTransitionEnd transitionend",function(){w.wrapup(h)})}else{w.container.animate(w.args,j.animationSpeed,j.easing,function(){w.wrapup(h)})}}else{if(!q){w.slides.eq(w.currentSlide).fadeOut(j.animationSpeed,j.easing);w.slides.eq(o).fadeIn(j.animationSpeed,j.easing,w.wrapup)}else{w.slides.eq(w.currentSlide).css({opacity:0});w.slides.eq(o).css({opacity:1});w.animating=false;w.currentSlide=w.animatingTo}}if(j.smoothHeight){v.smoothHeight(j.animationSpeed)}}};w.wrapup=function(c){if(!d&&!k){if(w.currentSlide===0&&w.animatingTo===w.last&&j.animationLoop){w.setProps(c,"jumpEnd")}else{if(w.currentSlide===w.last&&w.animatingTo===0&&j.animationLoop){w.setProps(c,"jumpStart")}}}w.animating=false;w.currentSlide=w.animatingTo;j.after(w)};w.animateSlides=function(){if(!w.animating){w.flexAnimate(w.getTarget("next"))}};w.pause=function(){clearInterval(w.animatedSlides);w.playing=false;if(j.pausePlay){v.pausePlay.update("play")}if(w.syncExists){v.sync("pause")}};w.play=function(){w.animatedSlides=setInterval(w.animateSlides,j.slideshowSpeed);w.playing=true;if(j.pausePlay){v.pausePlay.update("pause")}if(w.syncExists){v.sync("play")}};w.canAdvance=function(c,h){var f=g?w.pagingCount-1:w.last;return h?true:g&&w.currentItem===w.count-1&&c===0&&w.direction==="prev"?true:g&&w.currentItem===0&&c===w.pagingCount-1&&w.direction!=="next"?false:c===w.currentSlide&&!g?false:j.animationLoop?true:w.atEnd&&w.currentSlide===0&&c===f&&w.direction!=="next"?false:w.atEnd&&w.currentSlide===f&&c===0&&w.direction==="next"?false:true};w.getTarget=function(c){w.direction=c;if(c==="next"){return w.currentSlide===w.last?0:w.currentSlide+1}else{return w.currentSlide===0?w.last:w.currentSlide-1}};w.setProps=function(c,i,f){var h=function(){var l=c?c:(w.itemW+j.itemMargin)*w.move*w.animatingTo,o=function(){if(k){return i==="setTouch"?c:e&&w.animatingTo===w.last?0:e?w.limit-(w.itemW+j.itemMargin)*w.move*w.animatingTo:w.animatingTo===w.last?w.limit:l}else{switch(i){case"setTotal":return e?(w.count-1-w.currentSlide+w.cloneOffset)*c:(w.currentSlide+w.cloneOffset)*c;case"setTouch":return e?c:c;case"jumpEnd":return e?c:w.count*c;case"jumpStart":return e?w.count*c:c;default:return c}}}();return o*-1+"px"}();if(w.transitions){h=b?"translate3d(0,"+h+",0)":"translate3d("+h+",0,0)";f=f!==undefined?f/1000+"s":"0s";w.container.css("-"+w.pfx+"-transition-duration",f)}w.args[w.prop]=h;if(w.transitions||f===undefined){w.container.css(w.args)}};w.setup=function(f){if(!d){var c,h;if(f==="init"){w.viewport=a('<div class="'+x+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(w).append(w.container);w.cloneCount=0;w.cloneOffset=0;if(e){h=a.makeArray(w.slides).reverse();w.slides=a(h);w.container.empty().append(w.slides)}}if(j.animationLoop&&!k){w.cloneCount=2;w.cloneOffset=1;if(f!=="init"){w.container.find(".clone").remove()}w.container.append(w.slides.first().clone().addClass("clone")).prepend(w.slides.last().clone().addClass("clone"))}w.newSlides=a(j.selector,w);c=e?w.count-1-w.currentSlide+w.cloneOffset:w.currentSlide+w.cloneOffset;if(b&&!k){w.container.height((w.count+w.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){w.newSlides.css({display:"block"});w.doMath();w.viewport.height(w.h);w.setProps(c*w.h,"init")},f==="init"?100:0)}else{w.container.width((w.count+w.cloneCount)*200+"%");w.setProps(c*w.computedW,"init");setTimeout(function(){w.doMath();w.newSlides.css({width:w.computedW,"float":"left",display:"block"});if(j.smoothHeight){v.smoothHeight()}},f==="init"?100:0)}}else{w.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(f==="init"){if(!q){w.slides.eq(w.currentSlide).fadeIn(j.animationSpeed,j.easing)}else{w.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+j.animationSpeed/1000+"s ease"}).eq(w.currentSlide).css({opacity:1})}}if(j.smoothHeight){v.smoothHeight()}}if(!k){w.slides.removeClass(x+"active-slide").eq(w.currentSlide).addClass(x+"active-slide")}};w.doMath=function(){var c=w.slides.first(),i=j.itemMargin,f=j.minItems,h=j.maxItems;w.w=w.width();w.h=c.height();w.boxPadding=c.outerWidth()-c.width();if(k){w.itemT=j.itemWidth+i;w.minW=f?f*w.itemT:w.w;w.maxW=h?h*w.itemT:w.w;w.itemW=w.minW>w.w?(w.w-i*f)/f:w.maxW<w.w?(w.w-i*h)/h:j.itemWidth>w.w?w.w:j.itemWidth;w.visible=Math.floor(w.w/(w.itemW+i));w.move=j.move>0&&j.move<w.visible?j.move:w.visible;w.pagingCount=Math.ceil((w.count-w.visible)/w.move+1);w.last=w.pagingCount-1;w.limit=w.pagingCount===1?0:j.itemWidth>w.w?(w.itemW+i*2)*w.count-w.w-i:(w.itemW+i)*w.count-w.w-i}else{w.itemW=w.w;w.pagingCount=w.count;w.last=w.count-1}w.computedW=w.itemW-w.boxPadding};w.update=function(c,f){w.doMath();if(!k){if(c<w.currentSlide){w.currentSlide+=1}else{if(c<=w.currentSlide&&c!==0){w.currentSlide-=1}}w.animatingTo=w.currentSlide}if(j.controlNav&&!w.manualControls){if(f==="add"&&!k||w.pagingCount>w.controlNav.length){v.controlNav.update("add")}else{if(f==="remove"&&!k||w.pagingCount<w.controlNav.length){if(k&&w.currentSlide>w.last){w.currentSlide-=1;w.animatingTo-=1}v.controlNav.update("remove",w.last)}}}if(j.directionNav){v.directionNav.update()}};w.addSlide=function(h,c){var f=a(h);w.count+=1;w.last=w.count-1;if(b&&e){c!==undefined?w.slides.eq(w.count-c).after(f):w.container.prepend(f)}else{c!==undefined?w.slides.eq(c).before(f):w.container.append(f)}w.update(c,"add");w.slides=a(j.selector+":not(.clone)",w);w.setup();j.added(w)};w.removeSlide=function(f){var c=isNaN(f)?w.slides.index(a(f)):f;w.count-=1;w.last=w.count-1;if(isNaN(f)){a(f,w.slides).remove()}else{b&&e?w.slides.eq(w.last).remove():w.slides.eq(f).remove()}w.doMath();w.update(c,"remove");w.slides=a(j.selector+":not(.clone)",w);w.setup();j.removed(w)};v.init()};a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"",nextText:"",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};a.fn.flexslider=function(c){if(c===undefined){c={}}if(typeof c==="object"){return this.each(function(){var e=a(this),f=c.selector?c.selector:".slides > li",d=e.find(f);if(d.length===1){d.fadeIn(400);if(c.start){c.start(e)}}else{if(e.data("flexslider")===undefined){new a.flexslider(this,c)}}})}else{var b=a(this).data("flexslider");switch(c){case"play":b.play();break;case"pause":b.pause();break;case"next":b.flexAnimate(b.getTarget("next"),true);break;case"prev":case"previous":b.flexAnimate(b.getTarget("prev"),true);break;default:if(typeof c==="number"){b.flexAnimate(c,true)}}}}})(jQuery);